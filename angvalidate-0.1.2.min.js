/** 
 * Name:    ANG-Validator
 * Version: 0.1.0
 * Author:  Anop Goswami
 * License: GNU
 */
(function(e){e.fn.angvalidate=function(t){var n=e.extend({error_message:"This field is required.",error_message_ext:"File type is not valid.",error_message_size:"File size is not accepted.",error_msg_class:"error_msg",error_input_class:"error_input",success_input_class:"success_input",allowed_max_size:1e3,allowed_extensions:"jpg,png",error_message_valid:"Value not valid."},t);i=e(this);f=i.closest("form");s=i.selector;error=0;var r=function(t,r,i){var s=i["display-id"];if(s){t.addClass(n.error_input_class).removeClass(n.success_input_class);e("#"+s).html("");e("#"+s).html(r).addClass(n.error_msg_class)}else{if(t.next("span").hasClass(n.error_msg_class)){t.next("span").remove()}t.addClass(n.error_input_class).removeClass(n.success_input_class);if(t.next("."+n.error_msg_class).length==0){t.after('<span class="'+n.error_msg_class+'">'+r+"</span>")}}};var o=function(e){return e.replace(/^\s+|\s+$/g,"")};var u=function(t,r,i){var s=i["display-id"];if(s){t.addClass(n.success_input_class).removeClass(n.error_input_class);e("#"+s).html("").removeClass(n.error_msg_class)}else{t.addClass(n.success_input_class).removeClass(n.error_input_class);t.next("span").remove()}};var a=function(e){try{var t=0;t=e[0].files[0].size;return t}catch(n){alert("Error is :"+n);return 0}};var l=function(e,t){if(t["numeric"]){if(t["numeric"]==1||t["numeric"]=="true"){if(isNaN(e.val())){return 0}}}if(t["alphanum"]){if(t["alphanum"]==1||t["alphanum"]=="true"){var n=/^[A-Za-z0-9]+$/;if(!n.test(e.val())){return 0}else{return 1}}}if(t["alpha"]){if(t["alpha"]==1||t["alpha"]=="true"){var n=/^[A-Za-z]+$/;if(!n.test(e.val())){return 0}}}if(t["special-chars"]){if(t["special-chars"]==1||t["special-chars"]=="true"){var n=/^[a-zA-Z0-9- ]*$/;if(!n.test(e.val())){return 0}}}if(t["url"]){if(t["url"]==1||t["url"]=="true"){var n=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i;if(!n.test(e.val())){return 0}}}if(t["email"]){if(t["email"]==1||t["email"]=="true"){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!n.test(e.val())){return 0}}}if(t["match-id"]){var r=t["match-id"];if(e.val()!=$("#"+r).val()){return 0}}if(t["min-length"]){if(!isNaN(t["min-length"])){var i=t["min-length"];if(e.val().length<i){return 0}}}if(t["max-length"]){if(!isNaN(t["max-length"])){var i=t["max-length"];if(e.val().length>i){return 0}}}return 1};var c=function(t,i){if(i["custom-function"]){var s=i["custom-function"];var f=window[s];if(typeof f==="function")f()}var c=0;var h=i["msg"];if(!h)h=n.error_message;var p=t.prop("tagName").toLowerCase();if(p=="input"){var d=t.attr("type");if(d=="text"||d=="password"){var v=o(t.val());if(v==""){c=1}else{if(!l(t,i)){var h=i["msg-valid"];if(!h)h=n.error_message_valid;c=1}}}else if(d=="checkbox"){t=e("input[name="+t.attr("name")+"]:first");if(e("input[name="+t.attr("name")+"]:checked").length==0){c=1}}else if(d=="radio"){t=e("input[name="+t.attr("name")+"]:first");if(e("input[name="+t.attr("name")+"]:checked").length==0){c=1}}else if(d=="file"){var v=t.val();var m=v.split(".").pop();var g=n.allowed_extensions.split(",");var y=n.allowed_max_size;if(i["allowed-ext"]){g=i["allowed-ext"].split(",")}if(i["allowed-size"]){y=i["allowed-size"]}if(v==""){c=1}else if(e.inArray(m,g)==-1){var h=n.error_message_ext;if(i["msg-ext"]){h=i["msg-ext"]}r(t,h,i);return 0}else if(a(t)>y){var h=n.error_message_size;if(i["msg-size"]){h=i["msg-size"]}r(t,h,i);return 0}}else{var v=o(t.val());if(v==""){c=1}}}else if(p=="select"){if(t.attr("multiple")){if(t.find("option:selected").length==0)c=1}else{if(o(t.find("option:selected").val())=="")c=1}}else if(p=="textarea"){var v=o(t.val());if(v==""){c=1}else{if(!l(t,i)){var h=i["msg-valid"];if(!h)h=n.error_message_valid;c=1}}}else{var v=o(t.val());if(v==""){c=1}}if(c==1){r(t,h,i);return 0}else{u(t,h,i);return 1}};f.submit(function(){var t=new Array;var n=0;e(s).each(function(){var r=new Array;if(e(this).attr("ang-options")){var s=e(this).attr("ang-options").split(";");for(i=0;i<s.length;i++){var u=s[i].split(":");if(u[0]!=""&&u[1]!="")r[o(u[0])]=o(u[1])}}t[n++]=c(e(this),r)});if(jQuery.inArray(0,t)!==-1)return false;else return true});e(s).each(function(){var t=e(this).prop("tagName").toLowerCase();var n=e(this);var r=new Array;if(n.attr("ang-options")){var s=n.attr("ang-options").split(";");for(i=0;i<s.length;i++){var u=s[i].split(":");if(u[0]!=""&&u[1]!="")r[o(u[0])]=o(u[1])}}if(t=="input"){var a=n.attr("type");if(a=="text"||a=="password"){n.bind("blur",function(){c(n,r)})}else if(a=="checkbox"){e("input[name="+n.attr("name")+"]").bind("change",function(){c(n,r)})}else if(a=="radio"){e("input[name="+n.attr("name")+"]").bind("change",function(){c(n,r)})}else if(a=="file"){n.bind("change",function(){c(n,r)})}else{n.bind("blur",function(){c(n,r)})}}else if(t=="select"){n.bind("change",function(){c(n,r)})}else if(t=="textarea"){n.bind("blur",function(){c(n,r)})}else{n.bind("blur",function(){c(n,r)})}})}})(jQuery)
